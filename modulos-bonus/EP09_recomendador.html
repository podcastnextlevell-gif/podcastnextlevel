<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de RecomendaÃ§Ã£o | Next Level</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols_Outlined" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .product-card {
            cursor: pointer;
            transition: all 0.3s;
        }

        .product-card:hover {
            transform: translateY(-4px);
        }

        .product-card.liked {
            border-color: #10b981;
        }
    </style>
</head>

<body class="bg-slate-950 text-white min-h-screen p-8">
    <div class="max-w-6xl mx-auto">
        <div class="mb-8">
            <a href="../bonus.html" class="text-slate-400 hover:text-white text-sm flex items-center gap-2 mb-4">
                <span class="material-symbols-outlined">arrow_back</span>
                Voltar
            </a>
            <h1 class="text-3xl font-bold">ğŸ Sistema de RecomendaÃ§Ã£o de Produtos</h1>
        </div>

        <!-- Level Selection -->
        <div id="level-selection" class="glass-panel rounded-2xl p-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <button onclick="startLevel('facil')"
                    class="bg-green-500/20 border-2 border-green-500/50 rounded-xl p-6">
                    <span class="text-green-400 font-bold">â­ FÃCIL (50 pts)</span>
                    <p class="text-sm mt-2">Avalie 6 produtos e veja recomendaÃ§Ãµes</p>
                </button>
                <button onclick="startLevel('intermediario')"
                    class="bg-orange-500/20 border-2 border-orange-500/50 rounded-xl p-6">
                    <span class="text-orange-400 font-bold">â­â­ INTERMEDIÃRIO (100 pts)</span>
                    <p class="text-sm mt-2">12 produtos + anÃ¡lise de padrÃµes</p>
                </button>
                <button onclick="startLevel('dificil')" class="bg-red-500/20 border-2 border-red-500/50 rounded-xl p-6">
                    <span class="text-red-400 font-bold">â­â­â­ DIFÃCIL (200 pts)</span>
                    <p class="text-sm mt-2">20 produtos + sistema colaborativo</p>
                </button>
            </div>
        </div>

        <!-- Store Area -->
        <div id="store-area" class="hidden">
            <div class="grid md:grid-cols-4 gap-6 mb-6">
                <div class="md:col-span-3">
                    <div class="glass-panel rounded-2xl p-6 mb-6">
                        <h3 class="text-lg font-bold mb-4">ğŸ›ï¸ Produtos DisponÃ­veis</h3>
                        <div id="products-grid" class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>
                    </div>

                    <div id="recommendations-section" class="glass-panel rounded-2xl p-6 hidden">
                        <h3 class="text-lg font-bold mb-4">âœ¨ RecomendaÃ§Ãµes Para VocÃª</h3>
                        <div id="recommendations" class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>
                    </div>
                </div>

                <div class="glass-panel rounded-2xl p-6 h-fit">
                    <h3 class="text-lg font-bold mb-4">ğŸ“Š Suas PreferÃªncias</h3>
                    <div class="space-y-3 mb-6">
                        <div class="flex justify-between text-sm">
                            <span>Curtidas:</span>
                            <span id="likes-count" class="font-bold text-green-400">0</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Descurtidas:</span>
                            <span id="dislikes-count" class="font-bold text-red-400">0</span>
                        </div>
                    </div>
                    <button onclick="generateRecommendations()"
                        class="w-full bg-purple-500/20 border-2 border-purple-500/50 text-purple-400 py-3 rounded-xl font-bold hover:bg-purple-500/30"
                        disabled id="reco-btn">
                        Gerar RecomendaÃ§Ãµes
                    </button>
                </div>
            </div>

            <div class="text-center">
                <button onclick="validate()"
                    class="bg-gradient-to-r from-purple-500 to-pink-600 text-white px-8 py-4 rounded-xl font-bold text-lg">
                    âœ… VALIDAR APRENDIZADO
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentLevel = null;
        let products = [];
        let liked = new Set();
        let disliked = new Set();
        let recommendations = [];

        const productsData = {
            facil: [
                { id: 1, name: 'Notebook', category: 'tech', price: 3000 },
                { id: 2, name: 'Mouse', category: 'tech', price: 50 },
                { id: 3, name: 'Teclado', category: 'tech', price: 200 },
                { id: 4, name: 'Camiseta', category: 'roupa', price: 50 },
                { id: 5, name: 'CalÃ§a', category: 'roupa', price: 120 },
                { id: 6, name: 'TÃªnis', category: 'roupa', price: 300 }
            ],
            intermediario: [
                { id: 1, name: 'iPhone', category: 'tech', price: 5000 },
                { id: 2, name: 'AirPods', category: 'tech', price: 1500 },
                { id: 3, name: 'MacBook', category: 'tech', price: 8000 },
                { id: 4, name: 'Jaqueta', category: 'roupa', price: 400 },
                { id: 5, name: 'RelÃ³gio', category: 'acessorio', price: 1200 },
                { id: 6, name: 'Ã“culos', category: 'acessorio', price: 600 },
                { id: 7, name: 'Livro Python', category: 'livro', price: 80 },
                { id: 8, name: 'Livro IA', category: 'livro', price: 100 },
                { id: 9, name: 'Headset', category: 'tech', price: 700 },
                { id: 10, name: 'Mochila', category: 'acessorio', price: 250 },
                { id: 11, name: 'Camisa Social', category: 'roupa', price: 180 },
                { id: 12, name: 'Tablet', category: 'tech', price: 2000 }
            ],
            dificil: [
                { id: 1, name: 'Gaming PC', category: 'tech', price: 12000 },
                { id: 2, name: 'Monitor 4K', category: 'tech', price: 2500 },
                { id: 3, name: 'Cadeira Gamer', category: 'mobilia', price: 1800 },
                { id: 4, name: 'Mesa Gamer', category: 'mobilia', price: 1200 },
                { id: 5, name: 'Webcam', category: 'tech', price: 800 },
                { id: 6, name: 'Microfone', category: 'tech', price: 1200 },
                { id: 7, name: 'Curso Python', category: 'educacao', price: 500 },
                { id: 8, name: 'Curso IA', category: 'educacao', price: 800 },
                { id: 9, name: 'CertificaÃ§Ã£o', category: 'educacao', price: 1500 },
                { id: 10, name: 'Smartwatch', category: 'tech', price: 2000 },
                { id: 11, name: 'Fone Bluetooth', category: 'tech', price: 400 },
                { id: 12, name: 'Powerbank', category: 'tech', price: 150 },
                { id: 13, name: 'Terno', category: 'roupa', price: 800 },
                { id: 14, name: 'Sapato Social', category: 'roupa', price: 400 },
                { id: 15, name: 'Perfume', category: 'acessorio', price: 350 },
                { id: 16, name: 'Carteira', category: 'acessorio', price: 200 },
                { id: 17, name: 'LuminÃ¡ria', category: 'mobilia', price: 180 },
                { id: 18, name: 'Plants', category: 'decoracao', price: 80 },
                { id: 19, name: 'Quadro', category: 'decoracao', price: 250 },
                { id: 20, name: 'Livro NegÃ³cios', category: 'livro', price: 90 }
            ]
        };

        function startLevel(level) {
            currentLevel = level;
            products = [...productsData[level]];
            liked.clear();
            disliked.clear();

            document.getElementById('level-selection').classList.add('hidden');
            document.getElementById('store-area').classList.remove('hidden');

            renderProducts();
        }

        function renderProducts() {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = products.map(p => `
                <div class="product-card glass-panel rounded-xl p-4 border border-slate-700">
                    <div class="text-3xl mb-2 text-center">${getEmoji(p.category)}</div>
                    <h4 class="font-bold text-sm mb-1">${p.name}</h4>
                    <p class="text-xs text-slate-400 mb-3">R$ ${p.price}</p>
                    <div class="flex gap-2">
                        <button onclick="like(${p.id})" class="flex-1 bg-green-500/20 hover:bg-green-500/30 rounded px-2 py-1 text-xs">ğŸ‘</button>
                        <button onclick="dislike(${p.id})" class="flex-1 bg-red-500/20 hover:bg-red-500/30 rounded px-2 py-1 text-xs">ğŸ‘</button>
                    </div>
                </div>
            `).join('');
        }

        function getEmoji(category) {
            const emojis = { tech: 'ğŸ’»', roupa: 'ğŸ‘•', acessorio: 'âŒš', livro: 'ğŸ“š', educacao: 'ğŸ“', mobilia: 'ğŸª‘', decoracao: 'ğŸ¨' };
            return emojis[category] || 'ğŸ“¦';
        }

        function like(id) {
            liked.add(id);
            disliked.delete(id);
            updateCounts();
        }

        function dislike(id) {
            disliked.add(id);
            liked.delete(id);
            updateCounts();
        }

        function updateCounts() {
            document.getElementById('likes-count').textContent = liked.size;
            document.getElementById('dislikes-count').textContent = disliked.size;

            const minLikes = currentLevel === 'facil' ? 3 : currentLevel === 'intermediario' ? 5 : 8;
            document.getElementById('reco-btn').disabled = liked.size < minLikes;
        }

        function generateRecommendations() {
            // Simple recommendation: same categories as liked products
            const likedProducts = Array.from(liked).map(id => products.find(p => p.id === id));
            const likedCategories = new Set(likedProducts.map(p => p.category));

            recommendations = products.filter(p =>
                !liked.has(p.id) &&
                !disliked.has(p.id) &&
                likedCategories.has(p.category)
            ).slice(0, 6);

            const recoSection = document.getElementById('recommendations-section');
            const recoGrid = document.getElementById('recommendations');

            recoSection.classList.remove('hidden');
            recoGrid.innerHTML = recommendations.map(p => `
                <div class="glass-panel rounded-xl p-4 border-2 border-purple-500/50">
                    <div class="text-3xl mb-2 text-center">${getEmoji(p.category)}</div>
                    <h4 class="font-bold text-sm mb-1">${p.name}</h4>
                    <p class="text-xs text-purple-400 mb-2">R$ ${p.price}</p>
                    <p class="text-xs text-slate-500">Baseado em suas preferÃªncias</p>
                </div>
            `).join('');

            if (recommendations.length === 0) {
                recoGrid.innerHTML = '<p class="text-slate-500 col-span-3 text-center">Nenhuma recomendaÃ§Ã£o encontrada</p>';
            }
        }

        function validate() {
            const minInteractions = currentLevel === 'facil' ? 6 : currentLevel === 'intermediario' ? 10 : 15;
            const totalInteractions = liked.size + disliked.size;
            const hasRecommendations = recommendations.length > 0;

            const points = currentLevel === 'facil' ? 50 : currentLevel === 'intermediario' ? 100 : 200;

            if (totalInteractions >= minInteractions && hasRecommendations) {
                alert(`ğŸ‰ Sistema de recomendaÃ§Ã£o configurado!\n\nVocÃª interagiu com ${totalInteractions} produtos e recebeu ${recommendations.length} recomendaÃ§Ãµes personalizadas!\n\n+${points} pontos!`);
                window.location.href = '../bonus.html';
            } else {
                alert(`âš ï¸ Complete o desafio:\n\nâœ“ Interagir com ${minInteractions}+ produtos (atual: ${totalInteractions})\nâœ“ Gerar recomendaÃ§Ãµes`);
            }
        }
    </script>
</body>

</html>